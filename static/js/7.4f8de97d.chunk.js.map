{"version":3,"sources":["hooks/authHooks.js","HOCs/withAuth.js","HOCs/withInt.js","HOCs/index.js","routes/mainApp/mainAppImport.js","routes/mainApp/mainApp.js"],"names":["useAuthStatus","defaultValue","useState","isAuth","setIsAuth","username","useSelector","selectUsername","checkAuth","isLoggedIn","useEffect","withAuth","Comp","defaultStatus","React","forwardRef","props","ref","withInt","useContext","languageContext","translate","datetimeFormat","FunRoute","lazy","Promise","all","resolve","setTimeout","then","HomeRoute","BlogRoute","ContactRoute","BlogDetailRoute","AdminRoute","IntHeader","Header","connect","state","commits","selectCommits","logoutAction","fetchCommits","fetchNewCommitsAction","minBodyHeight","setMinBodyHeight","language","toggleLanguage","themeContext","theme","toggleTheme","headerRef","useRef","footerRef","headerHeight","current","clientHeight","footerHeight","window","innerHeight","setInterval","Fragment","style","minHeight","fallback","className","path","ROUTES","HOME_ROUTE","exact","component","BLOG_ROUTE","BLOG_DETAIL_ROUTE","FUN_ROUTE","CONTACT_ROUTE","ADMIN_ROUTE"],"mappings":"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","file":"static/js/7.4f8de97d.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { isLoggedIn } from \"../services/auth.service\";\nimport { useSelector } from \"react-redux\";\nimport { selectUsername, selectUserRoles } from \"../ducks\";\n\nexport const useAuthStatus = (defaultValue = false) => {\n  const [isAuth, setIsAuth] = useState(defaultValue);\n  const username = useSelector(selectUsername);\n  const checkAuth = () => {\n    isLoggedIn() ? setIsAuth(true) : setIsAuth(false);\n  };\n\n  useEffect(() => {\n    checkAuth();\n  }, [username]);\n  return isAuth;\n};\n\nexport const useRightStatus = roles => {\n  const [hasRight, setHasRight] = useState(false);\n  const userRoles = useSelector(selectUserRoles);\n  useEffect(() => {\n    setHasRight(userRoles.some(r => roles.includes(r)));\n    return () => {\n      console.log(\"clean up\");\n    };\n  }, [userRoles, roles]);\n  return hasRight;\n};\n","import React from \"react\";\nimport { useAuthStatus } from \"../hooks/authHooks\";\n\nexport const withAuth = (Comp, defaultStatus) => {\n  return React.forwardRef((props, ref) => {\n    const isAuth = useAuthStatus(defaultStatus);\n    return <Comp isAuth={isAuth} {...props} ref={ref} />;\n  });\n};\n","import React, { useContext } from \"react\";\nimport { languageContext } from \"../contexts\";\n\nexport const withInt = Comp => {\n  return React.forwardRef((props, ref) => {\n    const { translate, datetimeFormat } = useContext(languageContext);\n    return (\n      <Comp\n        translate={translate}\n        datetimeFormat={datetimeFormat}\n        {...props}\n        ref={ref}\n      />\n    );\n  });\n};\n","export * from \"./withAuth\";\nexport * from \"./withInt\";\n","import { lazy } from \"react\";\n\nconst delayTime = 700;\n\nexport const FunRoute = lazy(() => {\n  return Promise.all([\n    import(\"./fun/fun.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n\nexport const HomeRoute = lazy(() => {\n  return Promise.all([\n    import(\"./home/home.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n\nexport const BlogRoute = lazy(() => {\n  return Promise.all([\n    import(\"./blog/blog.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n\nexport const ContactRoute = lazy(() => {\n  return Promise.all([\n    import(\"./contact/contact.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n\nexport const BlogDetailRoute = lazy(() => {\n  return Promise.all([\n    import(\"./blog/blogDetail/blogDetail.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n\nexport const AdminRoute = lazy(() => {\n  return Promise.all([\n    import(\"./admin/admin.route\"),\n    new Promise(resolve => setTimeout(resolve, delayTime))\n  ]).then(([moduleExports]) => moduleExports);\n});\n","import React, {\n  useState,\n  useEffect,\n  useRef,\n  useContext,\n  Suspense\n} from \"react\";\nimport {\n  Footer,\n  Header,\n  SmallContainer,\n  LoadingSpinner\n} from \"../../components\";\nimport { Route } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { languageContext, themeContext } from \"../../contexts\";\nimport {\n  logoutAction,\n  fetchNewCommitsAction,\n  selectCommits\n} from \"../../ducks\";\nimport { withInt, withAuth } from \"../../HOCs\";\nimport { ROUTES } from \"../../consts\";\nimport {\n  AdminRoute,\n  FunRoute,\n  HomeRoute,\n  BlogRoute,\n  ContactRoute,\n  BlogDetailRoute\n} from \"./mainAppImport\";\n\nconst IntHeader = withAuth(withInt(Header));\n\nconst MainApp = ({ logoutAction, fetchCommits, commits }) => {\n  const [minBodyHeight, setMinBodyHeight] = useState(0);\n  const { language, toggleLanguage } = useContext(languageContext);\n  const { theme, toggleTheme } = useContext(themeContext);\n  const headerRef = useRef(null);\n  const footerRef = useRef(null);\n  useEffect(() => {\n    const headerHeight = headerRef.current.clientHeight;\n    const footerHeight = footerRef.current.clientHeight;\n    setMinBodyHeight(window.innerHeight - headerHeight - footerHeight);\n  }, []);\n\n  useEffect(() => {\n    setInterval(() => {\n      fetchCommits();\n    }, 60000 * 5);\n  }, [fetchCommits]);\n\n  return (\n    <React.Fragment>\n      <IntHeader\n        ref={headerRef}\n        theme={theme}\n        language={language}\n        toggleTheme={toggleTheme}\n        toggleLanguage={toggleLanguage}\n        logoutAction={logoutAction}\n        commits={commits}\n      />\n\n      <SmallContainer theme={theme} style={{ minHeight: minBodyHeight }}>\n        <Suspense\n          fallback={\n            <div className=\"text-center\">\n              <LoadingSpinner />\n            </div>\n          }\n        >\n          <Route path={ROUTES.HOME_ROUTE} exact component={HomeRoute} />\n          <Route path={ROUTES.BLOG_ROUTE} exact component={BlogRoute} />\n          <Route path={ROUTES.BLOG_DETAIL_ROUTE} component={BlogDetailRoute} />\n          <Route path={ROUTES.FUN_ROUTE} component={FunRoute} />\n          <Route path={ROUTES.CONTACT_ROUTE} component={ContactRoute} />\n          <Route path={ROUTES.ADMIN_ROUTE} component={AdminRoute} />\n        </Suspense>\n      </SmallContainer>\n      <Footer theme={theme} ref={footerRef} />\n    </React.Fragment>\n  );\n};\n\nexport default connect(\n  state => ({\n    commits: selectCommits(state)\n  }),\n  {\n    logoutAction: logoutAction,\n    fetchCommits: fetchNewCommitsAction\n  }\n)(MainApp);\n"],"sourceRoot":""}