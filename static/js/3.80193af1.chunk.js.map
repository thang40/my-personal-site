{"version":3,"sources":["hooks/authHooks.js","HOCs/withAuth.js","HOCs/withInt.js","HOCs/index.js","services/toast.service.js","routes/Login/login-route.module.scss","routes/Login/login.route.js"],"names":["useAuthStatus","defaultValue","useState","isAuth","setIsAuth","username","useSelector","selectUsername","checkAuth","isLoggedIn","useEffect","withAuth","Comp","defaultStatus","React","forwardRef","props","ref","withInt","useContext","languageContext","translate","datetimeFormat","ToastService","onToastClose","toastId","toastArr","filter","item","id","renderToastes","alert","msg","delay","counter","toastContainerIds","push","container","createContainer","ReactDOM","render","onClose","unmountToast","toastContainer","document","createElement","setAttribute","toastPlacement","insertBefore","childNodes","getElementById","unmountComponentAtNode","removeChild","this","toastRoot","body","appendChild","module","exports","IntLoginForm","LoginForm","toastService","_LoginRoute","loginAction","history","isLoading","setIsLoading","themeContext","toggleTheme","theme","language","toggleLanguage","lang","handleLoginFailed","handleLoginSuccess","ROUTES","HOME_ROUTE","styles","className","Item","to","icon","faHome","size","onClick","style","cursor","THEMES","DARK","faMoon","faSun","color","variant","handleSubmit","value","setTimeout","handleFail","handleSuccess","disabled","LoginRoute","connect","state"],"mappings":"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","file":"static/js/3.80193af1.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { isLoggedIn } from \"../services/auth.service\";\nimport { useSelector } from \"react-redux\";\nimport { selectUsername, selectUserRoles } from \"../ducks\";\n\nexport const useAuthStatus = (defaultValue = false) => {\n  const [isAuth, setIsAuth] = useState(defaultValue);\n  const username = useSelector(selectUsername);\n  const checkAuth = () => {\n    isLoggedIn() ? setIsAuth(true) : setIsAuth(false);\n  };\n\n  useEffect(() => {\n    checkAuth();\n  }, [username]);\n  return isAuth;\n};\n\nexport const useRightStatus = roles => {\n  const [hasRight, setHasRight] = useState(false);\n  const userRoles = useSelector(selectUserRoles);\n  useEffect(() => {\n    setHasRight(userRoles.some(r => roles.includes(r)));\n    return () => {\n      console.log(\"clean up\");\n    };\n  }, [userRoles, roles]);\n  return hasRight;\n};\n","import React from \"react\";\nimport { useAuthStatus } from \"../hooks/authHooks\";\n\nexport const withAuth = (Comp, defaultStatus) => {\n  return React.forwardRef((props, ref) => {\n    const isAuth = useAuthStatus(defaultStatus);\n    return <Comp isAuth={isAuth} {...props} ref={ref} />;\n  });\n};\n","import React, { useContext } from \"react\";\nimport { languageContext } from \"../contexts\";\n\nexport const withInt = Comp => {\n  return React.forwardRef((props, ref) => {\n    const { translate, datetimeFormat } = useContext(languageContext);\n    return (\n      <Comp\n        translate={translate}\n        datetimeFormat={datetimeFormat}\n        {...props}\n        ref={ref}\n      />\n    );\n  });\n};\n","export * from \"./withAuth\";\nexport * from \"./withInt\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CustomToast } from \"../components\";\n\nexport class ToastService {\n  constructor() {\n    this.toastContainerIds = [];\n    this.counter = 1;\n    this.toastRoot = document.createElement(\"div\");\n    this.toastPlacement = document.createElement(\"div\");\n\n    this.toastRoot.setAttribute(\"id\", \"toast-placement\");\n    this.toastRoot.setAttribute(\"style\", \"position: relative\");\n\n    this.toastPlacement.setAttribute(\"id\", \"toast-placement\");\n    this.toastPlacement.setAttribute(\n      \"style\",\n      \"position: absolute; bottom: 20px; right: 20px\"\n    );\n    document.body.appendChild(this.toastRoot);\n    this.toastRoot.appendChild(this.toastPlacement);\n  }\n\n  onToastClose = toastId => {\n    this.toastArr = this.toastArr.filter(item => item.id !== toastId);\n    this.renderToastes();\n  };\n\n  alert = (msg, delay) => {\n    const id = `toast-${this.counter++}`;\n    // const id = Symbol(\"id\");\n    this.toastContainerIds.push(id);\n    const container = this.createContainer(id);\n    ReactDOM.render(\n      <CustomToast\n        msg={msg}\n        delay={delay}\n        onClose={() => this.unmountToast(id)}\n      />,\n      container\n    );\n  };\n\n  createContainer = toastId => {\n    let toastContainer = document.createElement(\"div\");\n    toastContainer.setAttribute(\"id\", toastId);\n    this.toastPlacement.insertBefore(\n      toastContainer,\n      this.toastPlacement.childNodes[0]\n    );\n    return toastContainer;\n  };\n\n  unmountToast = toastId => {\n    const container = document.getElementById(toastId);\n    ReactDOM.unmountComponentAtNode(container);\n    this.toastPlacement.removeChild(container);\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"login-route_login__2OHWu\"};","import React, { useContext, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { Nav, Button } from \"react-bootstrap\";\nimport { faHome, faMoon, faSun } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { LoginForm, SmallContainer } from \"../../components\";\nimport { withInt } from \"../../HOCs\";\nimport { THEMES, themeContext, languageContext } from \"../../contexts\";\nimport { loginAction } from \"../../ducks\";\nimport { ROUTES } from \"../../consts\";\nimport { useAuthStatus } from \"../../hooks/authHooks\";\nimport { ToastService } from \"../../services/toast.service\";\nimport styles from \"./login-route.module.scss\";\n\nconst IntLoginForm = withInt(LoginForm);\nconst toastService = new ToastService();\n\nexport const _LoginRoute = ({ loginAction, history }) => {\n  const isAuth = useAuthStatus();\n  const [isLoading, setIsLoading] = useState(false);\n  const { toggleTheme, theme } = useContext(themeContext);\n  const { language, toggleLanguage, translate } = useContext(languageContext);\n\n  useEffect(() => {\n    if (isAuth) {\n      toastService.alert(\n        translate(\"Hey you already logged in, why are you here??? ðŸ˜ ðŸ˜ \"),\n        10000\n      );\n    }\n  }, [isAuth, translate]);\n\n  const displayLang = lang => {\n    if (lang === \"vi\") {\n      return \"vn\";\n    }\n    return lang;\n  };\n  const handleLoginFailed = () => {\n    setIsLoading(false);\n    toastService.alert(\"WRONG!! Dude stop!!\", 5000);\n  };\n  const handleLoginSuccess = () => {\n    setIsLoading(false);\n    history.push(ROUTES.HOME_ROUTE);\n    toastService.alert(\"COOL! YOU REALLY ARE ME!!\", 5000);\n  };\n  const handleLogin = value => {\n    setIsLoading(true);\n    setTimeout(() => {\n      loginAction(value, {\n        handleFail: handleLoginFailed,\n        handleSuccess: handleLoginSuccess\n      });\n    }, 1000);\n  };\n  return (\n    <div id={styles[\"login\"]} className=\"text-white-50\">\n      <nav className=\"pt-2 pb-2 pl-4 pr-4 d-flex\">\n        <Nav className=\"mr-auto align-items-center\">\n          <Nav.Item>\n            <Link to={ROUTES.HOME_ROUTE}>\n              <Icon icon={faHome} size=\"lg\" />\n            </Link>\n          </Nav.Item>\n        </Nav>\n        <Nav className=\"justify-content-end align-items-center\">\n          <Nav.Item>\n            <span className=\"nav-link\" onClick={toggleTheme}>\n              <Icon\n                size=\"lg\"\n                style={{ cursor: \"pointer\" }}\n                icon={theme === THEMES.DARK ? faMoon : faSun}\n                color={theme === THEMES.DARK ? \"#f5f3ce\" : \"#FDB813\"}\n              />\n            </span>\n          </Nav.Item>\n          <Nav.Item>\n            <Button\n              variant={theme === THEMES.DARK ? \"outline-light\" : \"outline-dark\"}\n              onClick={toggleLanguage}\n              className=\"text-uppercase\"\n            >\n              <div>{displayLang(language)}</div>\n            </Button>\n          </Nav.Item>\n        </Nav>\n      </nav>\n      <SmallContainer>\n        <h1 className=\"display-3 text-center\">\n          {translate(\"THIS PLACE IS ONLY FOR ADMIN!!\")}\n        </h1>\n        <h2 className=\"display-4 text-center\">{translate(\"ARE YOU ME?\")}</h2>\n        <section className=\"d-flex justify-content-center mt-4\">\n          <IntLoginForm\n            handleSubmit={handleLogin}\n            isLoading={isLoading}\n            disabled={isAuth}\n          />\n        </section>\n      </SmallContainer>\n    </div>\n  );\n};\n\nconst LoginRoute = connect(\n  state => state,\n  { loginAction }\n)(_LoginRoute);\n\nexport default LoginRoute;\n"],"sourceRoot":""}